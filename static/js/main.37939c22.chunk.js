(this["webpackJsonpcovid-timeline"]=this["webpackJsonpcovid-timeline"]||[]).push([[0],{15:function(e,t,a){e.exports={coverBlock:"App_coverBlock__17ARy",headLine:"App_headLine__1xDOm"}},2:function(e,t,a){e.exports={coverBorder:"Timeline_coverBorder__35Go8",header:"Timeline_header__2GGWD",patientDetail:"Timeline_patientDetail__JFXsu",upFont:"Timeline_upFont__38puB",bellowFont:"Timeline_bellowFont__13bOZ",selectClass:"Timeline_selectClass__1kusa",loading:"Timeline_loading__3UFCd"}},24:function(e,t,a){},3:function(e,t,a){e.exports={timeline:"TimelineDetail_timeline__1R6j4",dateClass:"TimelineDetail_dateClass__23uyD",detail:"TimelineDetail_detail__1-UzC",timeClassCover:"TimelineDetail_timeClassCover__2e_e1",timeClass:"TimelineDetail_timeClass__1at34",span:"TimelineDetail_span__16-0w",deleteButton:"TimelineDetail_deleteButton__155Mi"}},33:function(e,t,a){"use strict";a.r(t);var n=a(10),c=a.n(n),i=(a(24),a(1)),r=a.n(i),s=a(14),l=a(8),o=function(){return Object(l.b)()},d=l.c,u=a(18),m=a(13),j=Object(m.b)({name:"dataStorage",initialState:{items:[{id:"",gender:"",age:"",job:"",detail:[{id:"",date:"",description:""}]}],change:!1},reducers:{receiveData:function(e,t){e.items=t.payload.items},addData:function(e,t){var a=t.payload.items;e.change=!0;var n=e.items.find((function(e){return e.gender===a.gender&&e.age===a.age&&e.job===a.job}));if(n){n.detail.push({id:a.detail.id,date:a.detail.date,description:a.detail.description});var c=e.items.reduce((function(e,t){return t.id===n.id?[].concat(Object(u.a)(e),[n]):[].concat(Object(u.a)(e),[t])}),[]);e.items=c}else e.items.push({id:a.id,gender:a.gender,age:a.age,job:a.job,detail:[{id:a.detail.id,date:a.detail.date,description:a.detail.description}]})},removeData:function(e,t){var a=e.items.findIndex((function(e){return e.detail.some((function(e){return e.id===t.payload}))})),n=e.items[a].detail.findIndex((function(e){return e.id===t.payload}));e.items[a].detail.splice(n,1),e.change=!0}}}),b=j.actions,p=j,f=a(6),h=a.n(f),v=a(0),x=function(){var e=o(),t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],c=a[1],l=Object(i.useRef)(null),d=Object(i.useRef)(null),u=Object(i.useRef)(null),m=Object(i.useRef)(null);return Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=(new Date).toISOString(),i={items:{id:a,gender:l.current.value,age:d.current.value,job:u.current.value,detail:{id:a,date:m.current.value,description:n}}};e(b.addData(i)),m.current.value="",c("")},children:[Object(v.jsxs)("div",{className:"container-lg mb-4 p-4 ".concat(h.a.coverBlock),children:[Object(v.jsx)("h2",{className:h.a.header,children:"\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22"}),Object(v.jsxs)("div",{className:"mb-3 row",children:[Object(v.jsxs)("div",{className:"col-md-6 col-12",children:[Object(v.jsx)("label",{className:"form-label",children:"\u0e40\u0e1e\u0e28"}),Object(v.jsxs)("select",{className:"form-select",ref:l,required:!0,children:[Object(v.jsx)("option",{children:"\u0e0a\u0e32\u0e22"}),Object(v.jsx)("option",{children:"\u0e2b\u0e0d\u0e34\u0e07"})]})]}),Object(v.jsxs)("div",{className:"col-md-6 col-12",children:[Object(v.jsx)("label",{className:"form-label",children:"\u0e2d\u0e32\u0e22\u0e38"}),Object(v.jsx)("input",{className:"form-control",type:"number",min:"1",ref:d,required:!0})]})]}),Object(v.jsx)("label",{className:"form-label",children:"\u0e2d\u0e32\u0e0a\u0e35\u0e1e"}),Object(v.jsx)("input",{className:"form-control",type:"text",ref:u,required:!0})]}),Object(v.jsxs)("div",{className:"container-lg mb-4 p-4 ".concat(h.a.coverBlock),children:[Object(v.jsx)("h2",{className:h.a.header,children:"\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e17\u0e21\u0e4c\u0e44\u0e25\u0e19\u0e4c"}),Object(v.jsx)("label",{className:"form-label",children:"\u0e27\u0e31\u0e19\u0e40\u0e27\u0e25\u0e32"}),Object(v.jsx)("input",{className:"mb-3 form-control",type:"datetime-local",ref:m,required:!0}),Object(v.jsx)("label",{className:"form-label",children:"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"}),Object(v.jsx)("textarea",{className:"mb-3 form-control",value:n,onChange:function(e){c(e.target.value)},required:!0}),Object(v.jsx)("button",{className:h.a.button,children:"+ \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"})]})]})},O=a(2),_=a.n(O),g=a(12),N=a(5),w=a(3),D=a.n(w),y=function(e){var t=o();return Object(v.jsx)("div",{className:"container-lg m-0 p-0",children:Object(v.jsx)("p",{className:"".concat(D.a.deleteButton),onClick:function(){window.confirm("Do you want to remove this detail?")&&t(b.removeData(e.sentId))},children:"x"})})},C=function(e){var t=e.receivedDate,a=t.reduce((function(e,t){return Object(N.a)(Object(N.a)({},e),{},Object(g.a)({},t.day,(e[t.day]||[]).concat(t)))}),{}),n=Object.keys(a);return Object(v.jsx)("div",{className:"container-lg m-0 p-0",children:n.sort((function(e,t){return parseInt(e)-parseInt(t)})).map((function(e){return Object(v.jsx)("div",{className:"container-lg m-0 p-0",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"container-lg col-3 col-sm-2 m-0 p-0 ".concat(D.a.timeline),children:Object(v.jsx)("p",{className:"".concat(D.a.dateClass),children:e})}),Object(v.jsx)("div",{className:"container-lg col-8 col-sm-9 mb-4 p-2 ".concat(D.a.detail),children:t.sort((function(e,t){return parseInt(e.time)-parseInt(t.time)})).map((function(t){return Object(v.jsx)("div",{className:"".concat(D.a.timeClassCover),children:e===t.day&&Object(v.jsxs)("div",{className:"".concat(D.a.timeClass),children:[Object(v.jsxs)("p",{className:"mb-2",children:[t.time," ",Object(v.jsx)("span",{className:"".concat(D.a.span),children:t.description})]}),Object(v.jsx)(y,{sentId:t.id})]})},t.id)}))})]})},e)}))})},k=function(){var e=d((function(e){return e.items.items})),t=r.a.useState(0),a=Object(s.a)(t,2),n=a[0],c=a[1],i=[];return e[n].detail.map((function(e){var t="",a="";if(e.date){var n=new Date(e.date);t=new Intl.DateTimeFormat("en-GB").format(n);var c=new Date(n).getHours(),r=new Date(n).getMinutes();a=(c<10?"0"+c:c.toString())+":"+(r<10?"0"+r:r.toString())}i.push({id:e.id,day:t,time:a,description:e.description})})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4 d-flex justify-content-center",children:e[0].id?Object(v.jsxs)("div",{className:"btn ".concat(_.a.patientDetail),children:[Object(v.jsxs)("div",{"data-bs-toggle":"collapse","data-bs-target":"#collapse-content",children:[Object(v.jsxs)("p",{className:"m-0 ".concat(_.a.upFont),children:["\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22",e[n].gender," \u0e2d\u0e32\u0e22\u0e38 ",e[n].age," \u0e1b\u0e35"]}),Object(v.jsxs)("p",{className:"m-0 ".concat(_.a.bellowFont),children:["\u0e2d\u0e32\u0e0a\u0e35\u0e1e ",e[n].job]})]}),Object(v.jsx)("select",{id:"collapse-content",className:"collapse p-1 ".concat(_.a.selectClass),onChange:function(t){var a=e.findIndex((function(e){return e.id===t.target.value}));c(a)},children:e.map((function(e){return Object(v.jsxs)("option",{value:e.id,children:["\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22",e.gender," \u0e2d\u0e32\u0e22\u0e38 ",e.age," \u0e1b\u0e35 \u0e2d\u0e32\u0e0a\u0e35\u0e1e ",e.job]},e.id)}))})]}):Object(v.jsx)("p",{className:_.a.loading,children:"Loading"})}),e[0].id?Object(v.jsx)(C,{receivedDate:i}):null]})},T=function(){return Object(v.jsxs)("div",{className:"container-lg mb-4 py-3 ".concat(_.a.coverBorder),children:[Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)("h1",{className:_.a.header,children:"Timeline"})}),Object(v.jsx)(k,{})]})},B=a(4),I=a.n(B),F=a(9),S=a(15),R=a.n(S);var q=function(){var e=o(),t=d((function(e){return e.items}));return Object(i.useEffect)((function(){e(function(){var e=Object(F.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(F.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://covid-timeline-f6472-default-rtdb.firebaseio.com/data.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data!");case 5:return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,a();case 4:n=e.sent,t(b.receiveData(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(i.useEffect)((function(){var a;t.change&&e((a=t,Object(F.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://covid-timeline-f6472-default-rtdb.firebaseio.com/data.json",{method:"PUT",body:JSON.stringify({data:a}),headers:{"Content-Type":"application/json"}});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Could not send data!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,t();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))))}),[t,e]),Object(v.jsx)("div",{className:R.a.coverBlock,children:Object(v.jsxs)("div",{className:"container-lg pt-4 ".concat(R.a.containerCover),children:[Object(v.jsx)("h1",{className:"".concat(R.a.headLine),children:"COVID Timeline Generator"}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-xl-5 col-lg-5 col-md-4",children:Object(v.jsx)(x,{})}),Object(v.jsx)("div",{className:"col-xl-7 col-lg-7 col-md-8",children:Object(v.jsx)(T,{})})]})]})})},E=Object(m.a)({reducer:{items:p.reducer}});c.a.render(Object(v.jsx)(l.a,{store:E,children:Object(v.jsx)(q,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={coverBlock:"NewForm_coverBlock__3Wlxu",header:"NewForm_header__2I93Q",button:"NewForm_button__3hlXK","form-label":"NewForm_form-label__vd3SK"}}},[[33,1,2]]]);
//# sourceMappingURL=main.37939c22.chunk.js.map